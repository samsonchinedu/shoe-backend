"use strict";var display=document.querySelector(".display input"),buttons=Array.from(document.querySelectorAll('input[type="button"]'));function setDisplay(e){display.value=""===e||null==e?"":String(e),display.placeholder=""===display.value?"0":""}function lastChar(){return display.value.slice(-1)}var isOperator=function(e){return["+","-","*","/","."].includes(e)};function sanitizeExpression(e){return e.replace(/ร/g,"*").replace(/x/gi,"*").replace(/รท/g,"/")}function evaluateExpression(e){if(e=sanitizeExpression(e).replace(/\s+/g,""),!/^[0-9+\-*/().]+$/.test(e))throw new Error("Invalid characters");return isOperator(e.slice(-1))&&(e=e.slice(0,-1)),Function('"use strict"; return ('.concat(e,");"))()}function appendOperator(e){var t=display.value;""!==t||"-"!==e?""===t||isOperator(lastChar())?setDisplay(t.slice(0,-1)+e):setDisplay(t+e):setDisplay("-")}function handleButton(e){var t=display.value;if("AC"===e)setDisplay("");else if("DEL"===e)setDisplay(t.slice(0,-1));else if("%"===e){if(""!==t.trim()){var s=t.match(/(.*?)(\d+(\.\d+)?)$/);if(s){var a=s[1]||"",i=s[2];setDisplay(a+String(Number(i)/100))}else{var r=Number(t);Number.isNaN(r)||setDisplay(String(r/100))}}}else if("="===e)try{if(""!==t.trim()){var n=evaluateExpression(t.replace(/x/gi,"*"));setDisplay("number"!=typeof n||Number.isInteger(n)?String(n):parseFloat(n.toPrecision(12)).toString())}}catch(e){setDisplay("Error"),setTimeout(function(){return setDisplay("")},900)}else if("x"===e)appendOperator("*");else if("/"===e||"+"===e||"-"===e)appendOperator(e);else if("."===e){var l=t.match(/(\d*\.\d*|\d+)$/);if(l&&l[0].includes("."))return;""===t||isOperator(lastChar())?setDisplay(t+"0."):setDisplay(t+".")}else"00"===e?""===t||"0"===t&&!t.includes(".")?setDisplay("0"):setDisplay(t+"00"):/^\d$/.test(e)?setDisplay("0"===t?e:t+e):setDisplay(t+e)}buttons.forEach(function(e){e.addEventListener("click",function(){return handleButton(e.value)})}),document.addEventListener("keydown",function(e){var t=e.key;"Enter"===t?(e.preventDefault(),handleButton("=")):"Backspace"===t?(e.preventDefault(),handleButton("DEL")):/^[0-9]$/.test(t)?handleButton(t):[".","+","-","/","%"].includes(t)?handleButton(t):"*"===t&&handleButton("x")}),setDisplay("");
//# sourceMappingURL=app.min.js.map
